---
title: "Teaching an AI to respect your architecture"
description: "An open-source Skill for Claude and Copilot that encodes BLoC and Clean Architecture rules as decision trees for code generation."
date: "2026-01-26"
tags: ["AI Agents", "Claude Skills", "Flutter", "BLoC", "Open Source"]
---

AI coding assistants generate Flutter code that compiles fine and quietly breaks your architecture. Business logic leaks into widgets, colors get hardcoded directly in the view layer, loading states get skipped entirely, everything ends up coupled to everything else. You catch it in review, fix it, and the next generation does the same thing again. After a while you start wondering if there's a better way to deal with this than reviewing AI output forever.

A Skill is a structured instruction set that Claude or Copilot reads before it touches your codebase. The idea is to encode not just what the architecture is but how to apply it in any situation. Instead of saying "use BLoC", it specifies the exact data flow: UI dispatches an event, the BLoC emits a loading state, the repository calls the datasource, the datasource hits the backend, the result comes back up and the BLoC emits success or error, the UI rebuilds. That whole chain is spelled out. Directory structure is feature-first with `bloc/`, `data/`, and `view/` folders under each feature. Every color, spacing value and typography style comes from a design token, `AppColors`, `AppSpacing`, `AppTypography`. Nothing hardcoded.

<SkillArchitecture />

The tricky part was writing the decision tree. The Skill has to work for different situations: someone starting a new feature from scratch, someone adding a widget to something that already exists, someone integrating a new data source, someone refactoring old code. Each path through that tree needs enough specificity to produce consistent output without being so many rules that the model loses track. Too strict and the AI starts ignoring constraints. Too loose and it falls back on patterns from training that have nothing to do with your codebase. What actually helped was including working code examples alongside the rules. Showing the model what correct output looks like works better than describing what to avoid.

It picked up 10 stars on GitHub and Felix Angelov, the creator of the BLoC library, gave it a shoutout. That last part was a good sign that the patterns were at least in the right direction.
